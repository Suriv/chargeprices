var chargeAPI="https://raw.githubusercontent.com/Suriv/cp_json/master/db_gen.json";function dateJson(){$.ajax({url:chargeAPI,success:function(a){console.log(JSON.parse(a))}})}function dataLoad(){var e=$("#example").DataTable({responsive:!0,autoWidth:!1,sortable:!0,processing:!0,serverSide:!1,info:!1,lengthChange:!1,pageLength:9,language:{sSearch:"",searchPlaceholder:"Buscar"},start:1,ajax:{url:chargeAPI,dataSrc:"1593561600"},columns:[{class:"legends",orderable:!1,paging:!0,data:null,defaultContent:""},{data:"load"},{data:"power"},{data:"cost"}],createdRow:function(a,s,n){var e=s.load.substring(0,4).toLowerCase();$("td",a).eq(1).addClass(e)},order:[[1,"asc"]]}),t=[];$("#example tbody").on("click","tr td.legends",function(){var a=$(this).closest("tr"),s=e.row(a),n=$.inArray(a.attr("id"),t);s.child.isShown()?(a.removeClass("sel"),$(this).removeClass("open"),s.child.hide(),t.splice(n,1)):($(this).addClass("open"),a.addClass("sel"),s.child(format(s.data())).show(),-1===n&&t.push(a.attr("id")),$(this).closest("tr").next().addClass("details"))}),e.on("draw",function(){$.each(t,function(a,s){$("#"+s+" td.details-control").trigger("click")})})}function format(a){return'<ul class="legend"><li><span>Gestor de carga </span><span>'+a.load+"</span></li><li><span>Potencia </span><span>"+a.power+"</span></li><li><span>Coste </span><span>"+a.cost+"</span></li><li><span>Tipo </span><span>"+a.type+"</span></li><li><span>Carga minima (€)</span><span>"+a.min_load+"</span></li><li><span>Cuota alta (€)</span><span>"+a.high_fee+"</span></li><li><span>Cuota mensual (€)</span><span>"+a.month_fee+"</span></li><li><span>Tasa de inactividad / Exceso   (€)</span><span>"+a.overcrowding+"</span></li><li><span>Reserva de punto  (€)</span><span>"+a.r_point+"</span></li><li><span>Ubicación </span><span>"+a.location+"</span></li><li><span>Aplicación </span><span><a href="+a.app_url+' target="blank">'+a.app_name+"</a></span></li><li><span>Observaciones </span><span>"+a.ob+"</span></li></ul>"}$(function(){dataLoad(),dateJson()});